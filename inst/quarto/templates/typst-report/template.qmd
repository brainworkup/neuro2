---
title: NEUROCOGNITIVE EXAMINATION
patient: Biggie
name: Smalls, Biggie
doe: "YYYY-MM-DD"
date_of_report: last-modified
---

```{r}
#| label: setup
#| include: false
#| cache: false

# Set knitr options
knitr::opts_knit$set(
  width = 80,
  digits = 2,
  warnPartialMatchArgs = FALSE,
  crop = knitr::hook_pdfcrop,
  optipng = knitr::hook_optipng
)

# Set environment variables
Sys.setenv(PATIENT = "{{< var patient >}}")
patient <- Sys.getenv("PATIENT")
```

```{=typst}
#let case_number = [{{< var case_number >}}]
#let name = [{{< var last_name >}}, {{< var first_name >}}]
#let doe = [{{< var date_of_report >}}]
#let patient = [{{< var patient >}}]
#v(2em, weak: true)
#show block: set par(leading: 0.65em)
#block[
*CASE NUMBER:* #case_number \
*PATIENT NAME:* #name \
*DATE OF BIRTH:* {{< var dob >}}, Age {{< var age >}} \
*DATES OF EXAM:* {{< var doe >}}, {{< var doe2 >}}, and {{< var doe3 >}} \
*DATE OF REPORT*: {{< var date_of_report >}} \
]
```
{{< include _00-00_tests.qmd >}}

{{< include _01-00_nse_forensic.qmd >}}

{{< include _02-00_behav_obs.qmd >}}

```{=typst}
= NEUROCOGNITIVE FINDINGS
```

```{r}
#| label: include-domains
#| output: asis
#| echo: false

# Only include files that were actually generated
domain_files <- list.files(pattern = "^_02-[0-9]+_.*\\.qmd$", full.names = FALSE)

# Remove backup files and timestamped files
domain_files <- domain_files[!grepl("_[0-9]+_[0-9]+\\.qmd$", domain_files)]
domain_files <- domain_files[!grepl("\\.bak$", domain_files)]

# Sort the files numerically
if (length(domain_files) > 0) {
  # Extract the numeric part for sorting
  domain_numbers <- as.numeric(gsub("^_02-([0-9]+)_.*", "\\1", domain_files))
  domain_files <- domain_files[order(domain_numbers)]

  cat("<!-- Including", length(domain_files), "domain files -->\n")
  for (file in domain_files) {
    cat(sprintf("\n{{< include %s >}}\n", file))
  }
} else {
  cat("\n*No domain files found. Please run the domain generation process.*\n")
}

```

{{< pagebreak >}}

{{< include _03-00_sirf.qmd >}}

{{< include _03-00_sirf_text.qmd >}}

{{< include _03-01_recs.qmd >}}

{{< include _03-02_signature.qmd >}}

<!-- {{< pagebreak >}} -->

{{< include _03-03_appendix.qmd >}}
