---
title: NEUROCOGNITIVE EXAMINATION
patient: Biggie
name: Smalls, Biggie
doe: "YYYY-MM-DD"
date_of_report: last-modified
---

```{r}
#| label: setup
#| include: false
#| cache: false

# Load required packages
suppressPackageStartupMessages({
  library(dplyr)
  library(readr)
  library(here)
  library(yaml)
  library(neuro2)
})

# Set knitr options
knitr::opts_knit$set(
  width = 80,
  digits = 2,
  warnPartialMatchArgs = FALSE,
  crop = knitr::hook_pdfcrop,
  optipng = knitr::hook_optipng
)

# Set environment variables with default values
Sys.setenv(PATIENT = "{{< var patient >}}")
patient <- Sys.getenv("PATIENT")

# Lock svglite's font mapping to known-good fonts
options(
  svglite.system_fonts = list(
    sans = "Helvetica",
    serif = "Times",
    mono = "Menlo"
  )
)

# Also tell ggplot2 to use that same family by default
ggplot2::theme_set(
  ggplot2::theme_get() +
    ggplot2::theme(text = ggplot2::element_text(family = "sans"))
)
```

```{=typst}
#let case_number = [{{< var case_number >}}]
#let name = [{{< var last_name >}}, {{< var first_name >}}]
#let doe = [{{< var date_of_report >}}]
#let patient = [{{< var patient >}}]
#v(2em, weak: true)
#show block: set par(leading: 0.65em)
#block[
*CASE NUMBER:* #case_number \
*PATIENT NAME:* #name \
*DATE OF BIRTH:* {{< var dob >}}, Age {{< var age >}} \
*DATE(S) OF EXAM:* {{< var doe >}}, {{< var doe2 >}}, and {{< var doe3 >}} \
*DATE OF REPORT*: {{< var date_of_report >}} \
]
```
{{< include _00-00_tests.qmd >}}

{{< include _01-00_nse_adult.qmd >}}

{{< include _01-01_behav_obs.qmd >}}

```{=typst}
= NEUROCOGNITIVE FINDINGS
```
```{r}
#| label: generate-domain-files
#| include: false
#| cache: true

# Source and run the batch domain processor
source(here::here("inst", "scripts", "batch_domain_processor.R"))

# Process all domains
result <- process_all_domains()

# Create include file for template
available_domains <- sort(result$generated)
if (length(available_domains) > 0) {
  include_lines <- paste0("{{< include ", available_domains, " >}}")
  # Ensure a blank line between includes for proper Quarto rendering
  spaced <- as.vector(rbind(include_lines, ""))
  writeLines(spaced, "_domains_to_include.qmd")
} else {
  writeLines("", "_domains_to_include.qmd")
  warning("No domain files were generated!")
}
```

<!-- Domain sections - dynamically included based on available data -->

{{< include _domains_to_include.qmd >}}

{{< pagebreak >}}

{{< include _03-00_sirf.qmd >}}

{{< include _03-00_sirf_text.qmd >}}

{{< include _03-01_recs.qmd >}}

{{< include _03-02_signature.qmd >}}

{{< pagebreak >}}

{{< include _03-03_appendix.qmd >}}
