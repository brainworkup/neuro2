---
title: NEUROCOGNITIVE EXAMINATION
patient: Biggie
name: Smalls, Biggie
date_of_report: last-modified
---

```{r}
#| label: setup
#| include: false
#| cache: false

# Suppress warnings during setup
options(warn = -1)

# Load required libraries
library(knitr)
library(here)
library(readr)
library(dplyr)
library(gt)

# Source custom functions if available
if (file.exists("R/TableGT.R")) {
  source("R/TableGT.R")
}

# Set knitr options
knitr::opts_knit$set(
  width = 80,
  digits = 2,
  warnPartialMatchArgs = FALSE,
  crop = knitr::hook_pdfcrop,
  optipng = knitr::hook_optipng
)

# Set environment variables
Sys.setenv(PATIENT = "{{< var patient >}}")
patient <- Sys.getenv("PATIENT")

# Note: Data loading is now handled by the domain processors
# The NeuropsychReportSystemR6 generates domain-specific files
# that include their own data processing
```

```{r}
#| label: data-prep
#| include: false

# Data is now loaded dynamically by domain processors
# Each domain file (_02-XX_domain.qmd) handles its own data
# This ensures only relevant data is loaded for each domain

# If global data operations are needed, they can be added here
# For example, loading patient metadata or configuration
```

```{=typst}
#let name = [{{< var last_name >}}, {{< var first_name >}}]
#let doe = [{{< var date_of_report >}}]
#let patient = [{{< var patient >}}]
#v(2em, weak: true)
#show block: set par(leading: 0.65em)
#block[
*CASE NUMBER:* #case_number \
*PATIENT NAME:* #name \
*DATE OF BIRTH:* {{< var dob >}}, Age {{< var age >}} \
*DATES OF EXAM:* {{< var doe >}}, {{< var doe2 >}}, and {{< var doe3 >}} \
*DATE OF REPORT*: {{< var date_of_report >}} \
]
```
{{< include _00-00_tests.qmd >}}

{{< include _01-00_nse_adult.qmd >}}

{{< include _02-00_behav_obs.qmd >}}

# NEUROCOGNITIVE FINDINGS

```{r}
#| label: include-domains
#| output: asis
#| echo: false

# Define all possible domain files in canonical order
# Up to 14 total domains, with up to 10-12 domains per patient
all_possible_domains <- c(
  "_02-01_iq.qmd",
  "_02-02_academics.qmd",
  "_02-03_verbal.qmd",
  "_02-04_spatial.qmd",
  "_02-05_memory.qmd",
  "_02-06_executive.qmd",
  "_02-07_motor.qmd",
  "_02-08_social.qmd",
  "_02-09_adhd_adult.qmd",
  "_02-09_adhd_child.qmd",
  "_02-10_emotion_adult.qmd",
  "_02-10_emotion_child.qmd",
  "_02-11_adaptive.qmd",
  "_02-12_daily_living.qmd"
)

# Check which domain files actually exist
existing_files <- character()
for (file in all_possible_domains) {
  if (file.exists(file)) {
    existing_files <- c(existing_files, file)
  }
}

# Generate include statements for existing domain files
if (length(existing_files) > 0) {
  cat("<!-- Including", length(existing_files), "domain files -->\n")
  for (file in existing_files) {
    cat(sprintf("\n{{< include %s >}}\n", file))
  }
} else {
  cat("\n*No domain files found. Please run the domain generation process.*\n")
}
```

<!-- {{< pagebreak >}} -->

{{< include _03-00_sirf.qmd >}}

{{< include _03-00_sirf_text.qmd >}}

{{< include _03-01_recs.qmd >}}

{{< include _03-02_signature.qmd >}}

<!-- {{< pagebreak >}} -->

{{< include _03-03_appendix.qmd >}}
